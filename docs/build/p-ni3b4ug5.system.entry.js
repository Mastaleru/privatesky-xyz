var __assign=this&&this.__assign||function(){__assign=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++){t=arguments[a];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}return e};return __assign.apply(this,arguments)};System.register(["./p-24276ee4.system.js"],(function(e){"use strict";var t,a,n,r;return{setters:[function(e){t=e.g;a=e.r;n=e.c;r=e.h}],execute:function(){var o={basePagesUrl:globalConfig.pagesBasePath?globalConfig.pagesBasePath:"https://raw.githubusercontent.com/PrivateSky/pwc-apps/master/pages/",defaultPageProp:{icon:"fa-bars",type:"route",component:"psk-page-loader",exact:true},profile:{username:"PrivateSky",email:"privatesky@axiologic.net",avatar:"https://privatesky.xyz/assets/icon/privatesky.png"}};var s=[{name:"PSK Components",path:"/psk-components",icon:"fa-bars",type:"abstract",children:[{name:"App Menu",path:"/psk-components/app-menu",component:"app-menu-usage",icon:"fa-bars",type:"route",exact:true},{name:"App Router",component:"app-router-usage",path:"/psk-components/app-router",icon:"fa-bars",type:"route",exact:true},{name:"Attachments List",component:"attachment-list-usage",path:"/psk-components/attach-list",icon:"fa-bars",type:"route",exact:true},{name:"Files Chooser",component:"files-chooser-usage",path:"/psk-components/files-chooser",icon:"fa-bars",type:"route",exact:true},{name:"Modal",component:"modal-usage",path:"/psk-components/modal",icon:"fa-bars",type:"route",exact:true},{name:"PIN Popup",component:"pin-popup-usage",path:"/psk-components/pin-popup",icon:"fa-bars",type:"route",exact:true},{name:"UI Loader",component:"ui-loader-usage",path:"/psk-components/ui-loader",icon:"fa-bars",type:"route",exact:true},{name:"User Profile",path:"/psk-components/user-profile",icon:"fa-bars",type:"route",component:"user-profile-usage",exact:true},{name:"Feedback List",path:"/psk-components/list-feedback",icon:"fa-bars",type:"route",component:"feedback-list-usage",exact:true},{name:"Wizard",path:"/psk-components/wizard",icon:"fa-bars",type:"route",component:"wizard-usage",exact:true}]}];var i=[{stepName:"Name your CSB",stepIndex:0,stepComponent:"enter-csb-name"},{stepName:"Select CSB type(s)",stepIndex:1,stepComponent:"select-csb-type"},{stepName:"Save recovery Phrase",stepIndex:2,stepComponent:"save-recovery-phrase"},{stepName:"Finish",stepIndex:3,stepComponent:"finish-page"}];var p=o.basePagesUrl+"pages-structure.json";var l=function(){function e(e){var a=this;this.element=t(e);this.openFeedbackRequest=null;var n=JSON.parse(JSON.stringify(s));this._fetchPagesStructure(n);this.element.addEventListener("menuEvent",(function(e){e.stopImmediatePropagation();if(e.detail.type==="href"){window.location.href=e.detail.path}var t=e.detail;var n=new CustomEvent("routeChanged",{bubbles:true,cancelable:false,detail:t});a.element.dispatchEvent(n)}));this.element.addEventListener("needMenuItems",(function(e){e.stopImmediatePropagation();var t=e.detail;if(t&&typeof t==="function"){var n=setInterval((function(){if(a.pagesStructure){t(a.pagesStructure);r()}}),100);var r=function(){clearInterval(n)}}else{console.error("Callback was not properly provided!")}}));this.element.addEventListener("validateUrl",(function(e){e.stopImmediatePropagation();var t=e.detail,n=t.sourceUrl,r=t.callback;if(r&&typeof r==="function"){a._parseSourceUrl(n,r)}else{console.error("Callback was not properly provided!")}}));this.element.addEventListener("getUserInfo",(function(e){var t=e.detail;if(t&&typeof t==="function"){t(null,o.profile)}else{console.error("Callback was not properly provided!")}}));this.element.addEventListener("needWizardConfiguration",(function(e){var t=e.detail;if(t&&typeof t==="function"){t(i)}else{console.error("Callback was not properly provided!")}}));this.element.addEventListener("changeStep",(function(e){var t=e.detail.callback;if(t&&typeof t==="function"){a._handleChangeStep(e.detail)}else{console.error("Callback was not properly provided!")}}));this.element.addEventListener("openFeedback",(function(e){a.openFeedbackRequest=e.detail}));this.element.addEventListener("showFeedback",(function(e){a.openFeedbackRequest(e.detail.message,e.detail.name,e.detail.type)}));this.element.addEventListener("sendPin",(function(e){var t=e.detail.callback;if(t&&typeof t==="function"){a._handleSendPin(e.detail)}else{console.error("Callback was not properly provided!")}}))}e.prototype._parseSourceUrl=function(e,t){var a="",n=false,r=false,o=JSON.parse(JSON.stringify(this.pagesStructure)),s=e.split("/").map((function(e){return e.replace(/(\s+|:+|\/+)/g,"").toLowerCase()}));s.forEach((function(i,p){if(r)return;if(o.length===0){t(e+" is not a valid path in the application!");r=true;return}a=""+a+i;var l=o.find((function(e){var t=e.path.replace(/(\s+|:+|\/+|-+)/g,"").toLowerCase();var n=e.name.replace(/(\s+|:+|\/+|-+)/g,"").toLowerCase();return i===n||a===t}));if(!l){t(e+" is not a valid path in the application!");r=true;return}if(p===s.length-1&&l.type==="route"){t(null,l.path);n=true;return}o=l.hasOwnProperty("children")?l.children:[]}));if(!n&&!r){t(e+" is not a valid path in the application!")}};e.prototype._handleSendPin=function(e){var t=e.pin,a=e.callback;if(!t||t.trim().length<6){a("Invalid PIN length. Minimum is 6!")}else{console.log(t);a(null)}};e.prototype.__getPropertyValue=function(e,t){if(e.stepProperties&&e.stepProperties.hasOwnProperty(t)){return e.stepProperties[t]}return null};e.prototype._handleChangeStep=function(e){var t=e.stepIndexToDisplay;var a=e.callback;var n=e.wizardSteps;var r=e.activeStep;var o=null;if(t<0||t>=n.length){o="Index has no valid value"}else if(t<=r.stepIndex){n[r.stepIndex]=__assign({},r);r=__assign({},n[t])}else{switch(r.stepProperties.stepPhase){case"csb-name":{var s=this.__getPropertyValue(r,"csbName");if(s===null||s.trim().length===0){o="CSB Name is empty"}else{r.stepCompleted=true;n[r.stepIndex]=__assign({},r);r=__assign({},n[t])}break}case"csb-type":{var i=this.__getPropertyValue(r,"csbType");if(i===null||i.trim().length===0){o="CSB Type is empty"}else{r.stepCompleted=true;n[r.stepIndex]=__assign({},r);r=__assign({},n[t])}break}case"save-recovery-phrase":{var p=this.__getPropertyValue(r,"saveRecoveryPhrase");if(p===null){o="Recovery phase property is not sent"}else{r.stepCompleted=true;n[r.stepIndex]=__assign({},r);r=__assign({},n[t])}break}default:break}}a(o,{activeStep:r,wizardSteps:n})};e.prototype._fetchPagesStructure=function(e){var t=this;var a=new XMLHttpRequest;a.open("GET",p);a.onload=function(){if(a.status!=200){t._prepareNavigationStructure(e)}else{var n=JSON.parse(a.responseText);t._fillOptionalProps(n);var r=e.map((function(e){return e.name}));n.forEach((function(t,a){if(t.parent>-1){var o=r.indexOf(t.parent);if(o){if(!e[o].children){e[o].children=[]}t.path=e[o].path+t.path;e[o].children.push(t);n.splice(a,1)}}}));t._prepareNavigationStructure(n.concat(e))}};a.onerror=function(){t._prepareNavigationStructure(e)};a.send()};e.prototype._prepareNavigationStructure=function(e){this.pagesStructure=JSON.parse(JSON.stringify(e))};e.prototype._fillOptionalProps=function(e,t){var a=this;e.forEach((function(e){if(!e.path){var n=e.name.toLowerCase();var r=n.toLowerCase().replace(/\s+/g,"-");r=r.replace(/[:\/]/g,"");e.path=r}if(t){e.path=t+"/"+e.path}if(e.children){e.type="abstract";if(!e.icon){e.icon=o.defaultPageProp.icon}}else{for(var s in o.defaultPageProp){if(!e[s]){e[s]=o.defaultPageProp[s]}}if(e.component==="psk-page-loader"){if(!e.componentProps){e.componentProps={}}if(e.pageSrc){e.componentProps.pageUrl=o.basePagesUrl+e.pageSrc}else{var i=e.name.replace(/\s(.)/g,(function(e){return e.toUpperCase()})).replace(/\s/g,"");var p=t.replace(/^\//,"");e.componentProps.pageUrl=o.basePagesUrl+p+"/"+i+".html"}}}if(e.children){a._fillOptionalProps(e.children,e.path)}}))};return e}();var c=650;var u=e("app_root",function(){function e(e){a(this,e);this.mobileLayout=false;if(!this.controller){this.controller=new l(this)}this.routeChangedEvent=n(this,"routeChanged",7)}e.prototype.checkLayout=function(){this.mobileLayout=document.documentElement.clientWidth<c};e.prototype.componentWillLoad=function(){this.checkLayout()};e.prototype.render=function(){return r("div",{class:"global_container "+(this.mobileLayout?"is-mobile":"")},r("aside",null,r("psk-user-profile",null),r("app-menu",{"item-renderer":"sidebar-renderer",hamburgerMaxWidth:c}," "),this.mobileLayout===false?r("div",{class:"nav-footer"},"version 0.1"):null),r("section",null,r("psk-app-router",{failRedirectTo:"/home",historyType:"hash"}," "),this.mobileLayout===true?r("div",{class:"nav-footer bottom-stick"},"version 0.1"):null))};Object.defineProperty(e,"style",{get:function(){return"div.global_container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;height:100%;background-color:#f8f9fc}div.global_container.is-mobile{width:100%;-ms-flex-direction:column;flex-direction:column}.is-mobile aside{width:100%;height:auto;overflow:inherit}aside{height:100%;background-color:#4e73df;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(10%,#4e73df),to(#224abe));background-image:linear-gradient(180deg,#4e73df 10%,#224abe);color:#fff;-ms-flex-align:center;align-items:center;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-ms-flex-order:1;order:1;-ms-flex:1;flex:1;min-width:320px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:auto;scrollbar-color:#4e73df #e5e5e5;scrollbar-width:thin}.nav-footer{text-align:center;width:100%;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;background:#142b86;font-size:85%}.nav-footer.bottom-stick{color:#fff;background:#224abe}section{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:hidden auto;scrollbar-color:#4e73df #e5e5e5;scrollbar-width:thin}app-menu,psk-app-router{-ms-flex-positive:1;flex-grow:1}psk-user-profile{-ms-flex-direction:column;flex-direction:column}h1{font-size:1.4rem;font-weight:500;color:#fff;padding:0 12px}section{-ms-flex-order:2;order:2;-ms-flex:8;flex:8}aside::-webkit-scrollbar,section::-webkit-scrollbar{background-color:#fff;width:8px}aside::-webkit-scrollbar-track,section::-webkit-scrollbar-track{background-color:#e5e5e5}aside::-webkit-scrollbar-thumb,section::-webkit-scrollbar-thumb{background-color:#4e73df;border-radius:8px;border:2px solid #fff}aside::-webkit-scrollbar-button{display:none}"},enumerable:true,configurable:true});return e}())}}}));