import{g as e}from"./p-9835b40a.js";import{c as n}from"./p-6aa7f1b2.js";function t(e){let n=this;Object.keys(e).forEach((function(t){n[t]=e[t]}))}function o(e,n){try{let t=this;if(t.rootModel){let o=e;return t.parentChain&&(o=`${t.parentChain}.${e}`),t.rootModel.setChainValue(o,n),!0}return!1}catch(t){console.error(t)}return!1}function l(n,t){if(n||!t)return;console.log("{Bind model callback} Here we are...");let o,l,i,r=this,c=e(r);if(null!==c.getAttribute("data-view-model")&&"psk-for-each"===c.tagName.toLowerCase())return o=c.getAttribute("data-view-model"),r.__assignProperties.call(r,{rootModel:t,parentChain:i=o}),void r.render.call(r);if(o=c.getAttribute("view-model"),i=o,null===o&&(null===(l=c.getAttribute("name"))&&null!==c.getAttribute("label")&&(l=c.getAttribute("label").replace(/( |:|\/|\.|-)/g,"").toLowerCase()),i=l),o||l){if(r.__assignProperties.call(r,{rootModel:t,parentChain:i}),o){let e=t.getChainValue(i);if(!e)return;return Object.keys(e).forEach(e=>{a(e,`${i}.${e}`)}),void u()}for(let e=0;e<c.attributes.length;++e){const n=c.attributes[e];if(n.value.startsWith("@")){const e=n.value.split("@")[1];a(e,i?`${i}.${e}`:e)}}u()}function a(e,n){r[e]=t.getChainValue(n),t.onChange(n,(function(){r[e]=t.getChainValue(n)}))}function u(){const e=`${i}.value`;t.getChainValue(i)&&!t.getChainValue(e)&&a("value",e)}}function i(){return function(i){let{componentWillLoad:r,render:c}=i;i.componentWillLoad=function(){let i=this,a=e(i);function u(){n("getModelEvent",{bubbles:!0,composed:!0,cancellable:!0,detail:{callback:l.bind(i)}},!0,a),console.log("{BindModel} The model listener is ready!")}return i.render=c,i.changeModel=o,i.__assignProperties=t,"get-model"===a.getAttribute("get-model")?u():document.addEventListener("modelReady",(function(){u()})),r&&r.call(i)}}}export{i as B};