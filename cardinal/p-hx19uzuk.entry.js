import{r as t,h as e,c as i,g as s}from"./p-a1b3783e.js";import{T as o,f as r,s as c,e as a,g as n}from"./p-7c85f64b.js";import{C as p}from"./p-2a22f87e.js";var l=function(t,e,i,s){var o,r=arguments.length,c=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,i,c):o(e,i))||c);return r>3&&c&&Object.defineProperty(e,i,c),c};const h=class{constructor(e){t(this,e),this.title="",this.id=""}render(){const t=this.id.trim().replace(/(\s+|:+|\/+)/g,"-").toLowerCase();let i=null;return this.title&&(i=e("div",{class:"card-header"},e("h5",null,this.title,t.length>0?e("psk-copy-clipboard",{id:t},"#"):null))),e("div",{class:"card psk-card",id:t},i,e("div",{class:"card-body"},e("slot",null)))}};l([p(),o({description:"This property is the title of our own version of the html card.",isMandatory:!1,propertyType:"string"})],h.prototype,"title",void 0),l([o({description:"This property is the id which will be used in order to create the unique element id and for the psk-copy-clipboard component.",isMandatory:!1,propertyType:"string"})],h.prototype,"id",void 0);var d=function(t,e,i,s){var o,r=arguments.length,c=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,i,c):o(e,i))||c);return r>3&&c&&Object.defineProperty(e,i,c),c};const f=class{constructor(e){t(this,e),this.title="",this.reportedToc=!1,this.guid=(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})))(),this.chapterInfo={title:this.title,guid:this.guid,children:[]},this.sendChapter=i(this,"psk-send-chapter",5)}componentDidLoad(){this.reportedToc||this.sendChapter.emit(this.chapterInfo)}receivedChapter(t){if(t.path&&t.path[0]&&s(this)!==t.path[0]){if(t.stopImmediatePropagation(),this.chapterInfo.children.length>0){let e=!1;this.chapterInfo.children.forEach(i=>{i.guid===t.detail.guid&&(i.children=t.detail.children,e=!0)}),e||this.chapterInfo.children.push(t.detail)}else this.chapterInfo.children.push(t.detail);this.sendChapter.emit(this.chapterInfo),this.reportedToc=!0}}render(){return e("psk-card",{title:this.title,id:this.title.replace(/( |:|\/|\.)/g,"-").toLowerCase()},e("slot",null))}};d([p(),o({description:"This property is the title, that will be used in order to create a psk-card ",isMandatory:!1,propertyType:"string"})],f.prototype,"title",void 0),d([o({description:"This property is the guid that will be created as a unique 32 characters code passed as a id for the chapter",isMandatory:!1,propertyType:"string"})],f.prototype,"guid",void 0);const u=class{constructor(e){t(this,e),this.id=""}_copyToClipboardHandler(t){try{let e=window.location.href;-1!==window.location.href.indexOf("?chapter=")&&(e=window.location.href.split("?chapter=")[0]),navigator.clipboard.writeText(`${e}?chapter=${t}`);const i=this.element.querySelector(".tooltip");i.innerHTML=r,i.setAttribute("class","tooltip copied"),c(t,a(this.element,"psk-page"))}catch(e){console.error(e)}}_resetTooltip(){const t=this.element.querySelector(".tooltip");t.innerHTML=n,t.setAttribute("class","tooltip")}_isCopySupported(){let t=!!document.queryCommandSupported;return["copy","cut"].forEach(e=>{t=t&&!!document.queryCommandSupported(e)}),t}render(){const t=this.id.trim().replace(/( |:|\/|\.)/g,"-").toLowerCase();if(0!==t.length&&this._isCopySupported())return e("div",{id:"tooltip",onClick:e=>{e.stopImmediatePropagation(),this._copyToClipboardHandler(t)},onMouseOut:()=>{this._resetTooltip()}},e("a",{class:"mark",href:`#${t}`,onClick:t=>{t.preventDefault()}},e("slot",null)),e("span",{class:"tooltip"},n))}get element(){return s(this)}};!function(t,e,i,s){var o,r=arguments.length,c=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,i,c):o(e,i))||c);r>3&&c&&Object.defineProperty(e,i,c)}([p(),o({description:"This property is the id of the textzone that will be copied to the clipboard.",isMandatory:!1,propertyType:"string"})],u.prototype,"id",void 0);export{h as psk_card,f as psk_chapter,u as psk_copy_clipboard};